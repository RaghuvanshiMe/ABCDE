{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Cart(_ref){let{token,cartId}=_ref;const[cartItems,setCartItems]=useState([]);const[orderPlaced,setOrderPlaced]=useState(false);useEffect(()=>{async function fetchCartItems(){if(!cartId)return;try{const response=await axios.get('http://localhost:8080/carts',{headers:{Authorization:`Bearer ${token}`}});const cart=response.data.find(c=>c.id===cartId);if(cart){setCartItems(cart.items||[]);}}catch(error){console.error('Failed to fetch cart items',error);}}fetchCartItems();},[cartId,token]);const placeOrder=async()=>{try{await axios.post('http://localhost:8080/orders',{cart_id:cartId},{headers:{Authorization:`Bearer ${token}`}});setOrderPlaced(true);alert('Order placed successfully!');}catch(error){console.error('Failed to place order',error);alert('Failed to place order');}};if(!cartId){return/*#__PURE__*/_jsx(\"div\",{children:\"No items in cart.\"});}if(orderPlaced){return/*#__PURE__*/_jsx(\"div\",{children:\"Order has been placed. Thank you!\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Cart\"}),/*#__PURE__*/_jsx(\"ul\",{children:cartItems.map(item=>/*#__PURE__*/_jsxs(\"li\",{children:[item.name,\" - \",item.status]},item.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:placeOrder,children:\"Place Order\"})]});}export default Cart;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Cart","_ref","token","cartId","cartItems","setCartItems","orderPlaced","setOrderPlaced","fetchCartItems","response","get","headers","Authorization","cart","data","find","c","id","items","error","console","placeOrder","post","cart_id","alert","children","map","item","name","status","onClick"],"sources":["C:/Users/mihir/OneDrive/Desktop/newww/frontend/src/components/Cart.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Cart({ token, cartId }) {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [orderPlaced, setOrderPlaced] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function fetchCartItems() {\r\n      if (!cartId) return;\r\n      try {\r\n        const response = await axios.get('http://localhost:8080/carts', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        const cart = response.data.find((c) => c.id === cartId);\r\n        if (cart) {\r\n          setCartItems(cart.items || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch cart items', error);\r\n      }\r\n    }\r\n    fetchCartItems();\r\n  }, [cartId, token]);\r\n\r\n  const placeOrder = async () => {\r\n    try {\r\n      await axios.post(\r\n        'http://localhost:8080/orders',\r\n        { cart_id: cartId },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setOrderPlaced(true);\r\n      alert('Order placed successfully!');\r\n    } catch (error) {\r\n      console.error('Failed to place order', error);\r\n      alert('Failed to place order');\r\n    }\r\n  };\r\n\r\n  if (!cartId) {\r\n    return <div>No items in cart.</div>;\r\n  }\r\n\r\n  if (orderPlaced) {\r\n    return <div>Order has been placed. Thank you!</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Your Cart</h2>\r\n      <ul>\r\n        {cartItems.map((item) => (\r\n          <li key={item.id}>{item.name} - {item.status}</li>\r\n        ))}\r\n      </ul>\r\n      <button onClick={placeOrder}>Place Order</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,QAAS,CAAAC,IAAIA,CAAAC,IAAA,CAAoB,IAAnB,CAAEC,KAAK,CAAEC,MAAO,CAAC,CAAAF,IAAA,CAC7B,KAAM,CAACG,SAAS,CAAEC,YAAY,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACY,WAAW,CAAEC,cAAc,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAErDD,SAAS,CAAC,IAAM,CACd,cAAe,CAAAe,cAAcA,CAAA,CAAG,CAC9B,GAAI,CAACL,MAAM,CAAE,OACb,GAAI,CACF,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAd,KAAK,CAACe,GAAG,CAAC,6BAA6B,CAAE,CAC9DC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUV,KAAK,EAAG,CAC9C,CAAC,CAAC,CACF,KAAM,CAAAW,IAAI,CAAGJ,QAAQ,CAACK,IAAI,CAACC,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACC,EAAE,GAAKd,MAAM,CAAC,CACvD,GAAIU,IAAI,CAAE,CACRR,YAAY,CAACQ,IAAI,CAACK,KAAK,EAAI,EAAE,CAAC,CAChC,CACF,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACF,CACAX,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACL,MAAM,CAAED,KAAK,CAAC,CAAC,CAEnB,KAAM,CAAAmB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACF,KAAM,CAAA1B,KAAK,CAAC2B,IAAI,CACd,8BAA8B,CAC9B,CAAEC,OAAO,CAAEpB,MAAO,CAAC,CACnB,CAAEQ,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUV,KAAK,EAAG,CAAE,CAClD,CAAC,CACDK,cAAc,CAAC,IAAI,CAAC,CACpBiB,KAAK,CAAC,4BAA4B,CAAC,CACrC,CAAE,MAAOL,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CK,KAAK,CAAC,uBAAuB,CAAC,CAChC,CACF,CAAC,CAED,GAAI,CAACrB,MAAM,CAAE,CACX,mBAAON,IAAA,QAAA4B,QAAA,CAAK,mBAAiB,CAAK,CAAC,CACrC,CAEA,GAAInB,WAAW,CAAE,CACf,mBAAOT,IAAA,QAAA4B,QAAA,CAAK,mCAAiC,CAAK,CAAC,CACrD,CAEA,mBACE1B,KAAA,QAAA0B,QAAA,eACE5B,IAAA,OAAA4B,QAAA,CAAI,WAAS,CAAI,CAAC,cAClB5B,IAAA,OAAA4B,QAAA,CACGrB,SAAS,CAACsB,GAAG,CAAEC,IAAI,eAClB5B,KAAA,OAAA0B,QAAA,EAAmBE,IAAI,CAACC,IAAI,CAAC,KAAG,CAACD,IAAI,CAACE,MAAM,GAAnCF,IAAI,CAACV,EAAmC,CAClD,CAAC,CACA,CAAC,cACLpB,IAAA,WAAQiC,OAAO,CAAET,UAAW,CAAAI,QAAA,CAAC,aAAW,CAAQ,CAAC,EAC9C,CAAC,CAEV,CAEA,cAAe,CAAAzB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}